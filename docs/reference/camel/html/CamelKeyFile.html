<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CamelKeyFile: Camel Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="Camel Reference Manual">
<link rel="up" href="Storage.html" title="Metadata Storage">
<link rel="prev" href="Storage.html" title="Metadata Storage">
<link rel="next" href="CamelCertDB.html" title="CamelCertDB">
<meta name="generator" content="GTK-Doc V1.25 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#CamelKeyFile.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#CamelKeyFile.object-hierarchy" class="shortcut">Object Hierarchy</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="Storage.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="Storage.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="CamelCertDB.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="CamelKeyFile"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="CamelKeyFile.top_of_page"></a>CamelKeyFile</span></h2>
<p>CamelKeyFile</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="CamelKeyFile.functions"></a><h2>Functions</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="returnvalue">CamelBlockFile</span></a> *
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-new" title="camel_block_file_new ()">camel_block_file_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-rename" title="camel_block_file_rename ()">camel_block_file_rename</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-delete" title="camel_block_file_delete ()">camel_block_file_delete</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="returnvalue">CamelBlock</span></a> *
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-new-block" title="camel_block_file_new_block ()">camel_block_file_new_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-free-block" title="camel_block_file_free_block ()">camel_block_file_free_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="returnvalue">CamelBlock</span></a> *
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-get-block" title="camel_block_file_get_block ()">camel_block_file_get_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-detach-block" title="camel_block_file_detach_block ()">camel_block_file_detach_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-attach-block" title="camel_block_file_attach_block ()">camel_block_file_attach_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-touch-block" title="camel_block_file_touch_block ()">camel_block_file_touch_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-unref-block" title="camel_block_file_unref_block ()">camel_block_file_unref_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-sync-block" title="camel_block_file_sync_block ()">camel_block_file_sync_block</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-block-file-sync" title="camel_block_file_sync ()">camel_block_file_sync</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="CamelKeyFile.html" title="CamelKeyFile"><span class="returnvalue">CamelKeyFile</span></a> *
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-key-file-new" title="camel_key_file_new ()">camel_key_file_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-key-file-rename" title="camel_key_file_rename ()">camel_key_file_rename</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-key-file-delete" title="camel_key_file_delete ()">camel_key_file_delete</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-key-file-write" title="camel_key_file_write ()">camel_key_file_write</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
</td>
<td class="function_name">
<a class="link" href="CamelKeyFile.html#camel-key-file-read" title="camel_key_file_read ()">camel_key_file_read</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<a name="CamelBlockFile"></a><div class="refsect1">
<a name="CamelKeyFile.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody>
<tr>
<td class="typedef_keyword">typedef</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#camel-block-t" title="camel_block_t">camel_block_t</a></td>
</tr>
<tr>
<td class="typedef_keyword">typedef</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#camel-key-t" title="camel_key_t">camel_key_t</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#CamelBlockFileFlags" title="enum CamelBlockFileFlags">CamelBlockFileFlags</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#CAMEL-BLOCK-SIZE:CAPS" title="CAMEL_BLOCK_SIZE">CAMEL_BLOCK_SIZE</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#CAMEL-BLOCK-SIZE-BITS:CAPS" title="CAMEL_BLOCK_SIZE_BITS">CAMEL_BLOCK_SIZE_BITS</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#CamelBlockFlags" title="enum CamelBlockFlags">CamelBlockFlags</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#CamelBlockRoot" title="struct CamelBlockRoot">CamelBlockRoot</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock">CamelBlock</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="CamelKeyFile.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    <a href="/usr/share/gtk-doc/html/gobjectgobject-The-Base-Object-Type.html#GObject-struct">GObject</a>
    <span class="lineart">├──</span> CamelBlockFile
    <span class="lineart">╰──</span> CamelKeyFile
</pre>
</div>
<div class="refsect1">
<a name="CamelKeyFile.description"></a><h2>Description</h2>
</div>
<div class="refsect1">
<a name="CamelKeyFile.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="camel-block-file-new"></a><h3>camel_block_file_new ()</h3>
<pre class="programlisting"><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="returnvalue">CamelBlockFile</span></a> *
camel_block_file_new (<em class="parameter"><code>const <a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *path</code></em>,
                      <em class="parameter"><code><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="type">gint</span></a> flags</code></em>,
                      <em class="parameter"><code>const <a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gchar"><span class="type">gchar</span></a> version[8]</code></em>,
                      <em class="parameter"><code><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gsize"><span class="type">gsize</span></a> block_size</code></em>);</pre>
<p>Allocate a new block file, stored at <em class="parameter"><code>path</code></em>
.  <em class="parameter"><code>version</code></em>
 contains an 8 character
version string which must match the head of the file, or the file will be
intitialised.</p>
<p><em class="parameter"><code>block_size</code></em>
 is currently ignored and is set to CAMEL_BLOCK_SIZE.</p>
<div class="refsect3">
<a name="camel-block-file-new.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>path</p></td>
<td class="parameter_description"><p>@:</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="camel-block-file-new.returns"></a><h4>Returns</h4>
<p> The new block file, or NULL if it could not be created.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-rename"></a><h3>camel_block_file_rename ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_block_file_rename (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                         <em class="parameter"><code>const <a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *path</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-delete"></a><h3>camel_block_file_delete ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_block_file_delete (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *kf</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-new-block"></a><h3>camel_block_file_new_block ()</h3>
<pre class="programlisting"><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="returnvalue">CamelBlock</span></a> *
camel_block_file_new_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>);</pre>
<p>Allocate a new block, return a pointer to it.  Old blocks
may be flushed to disk during this call.</p>
<div class="refsect3">
<a name="camel-block-file-new-block.returns"></a><h4>Returns</h4>
<p> The block, or NULL if an error occurred.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-free-block"></a><h3>camel_block_file_free_block ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_block_file_free_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                             <em class="parameter"><code><a class="link" href="CamelKeyFile.html#camel-block-t" title="camel_block_t"><span class="type">camel_block_t</span></a> id</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-get-block"></a><h3>camel_block_file_get_block ()</h3>
<pre class="programlisting"><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="returnvalue">CamelBlock</span></a> *
camel_block_file_get_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                            <em class="parameter"><code><a class="link" href="CamelKeyFile.html#camel-block-t" title="camel_block_t"><span class="type">camel_block_t</span></a> id</code></em>);</pre>
<p>Retreive a block <em class="parameter"><code>id</code></em>
.</p>
<div class="refsect3">
<a name="camel-block-file-get-block.returns"></a><h4>Returns</h4>
<p> The block, or NULL if blockid is invalid or a file error
occurred.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-detach-block"></a><h3>camel_block_file_detach_block ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
camel_block_file_detach_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                               <em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="type">CamelBlock</span></a> *bl</code></em>);</pre>
<p>Detatch a block from the block file's cache.  The block should
be unref'd or attached when finished with.  The block file will
perform no writes of this block or flushing of it if the cache
fills.</p>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-attach-block"></a><h3>camel_block_file_attach_block ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
camel_block_file_attach_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                               <em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="type">CamelBlock</span></a> *bl</code></em>);</pre>
<p>Reattach a block that has been detached.</p>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-touch-block"></a><h3>camel_block_file_touch_block ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
camel_block_file_touch_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                              <em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="type">CamelBlock</span></a> *bl</code></em>);</pre>
<p>Mark a block as dirty.  The block will be written to disk if
it ever expires from the cache.</p>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-unref-block"></a><h3>camel_block_file_unref_block ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
camel_block_file_unref_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                              <em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="type">CamelBlock</span></a> *bl</code></em>);</pre>
<p>Mark a block as unused.  If a block is used it will not be
written to disk, or flushed from memory.</p>
<p>If a block is detatched and this is the last reference, the
block will be freed.</p>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-sync-block"></a><h3>camel_block_file_sync_block ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_block_file_sync_block (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>,
                             <em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlock" title="struct CamelBlock"><span class="type">CamelBlock</span></a> *bl</code></em>);</pre>
<p>Flush a block to disk immediately.  The block will only
be flushed to disk if it is marked as dirty (touched).</p>
<div class="refsect3">
<a name="camel-block-file-sync-block.returns"></a><h4>Returns</h4>
<p> -1 on io error.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="camel-block-file-sync"></a><h3>camel_block_file_sync ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_block_file_sync (<em class="parameter"><code><a class="link" href="CamelKeyFile.html#CamelBlockFile"><span class="type">CamelBlockFile</span></a> *bs</code></em>);</pre>
<p>Sync all dirty blocks to disk, including the root block.</p>
<div class="refsect3">
<a name="camel-block-file-sync.returns"></a><h4>Returns</h4>
<p> -1 on io error.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="camel-key-file-new"></a><h3>camel_key_file_new ()</h3>
<pre class="programlisting"><a class="link" href="CamelKeyFile.html" title="CamelKeyFile"><span class="returnvalue">CamelKeyFile</span></a> *
camel_key_file_new (<em class="parameter"><code>const <a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *path</code></em>,
                    <em class="parameter"><code><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="type">gint</span></a> flags</code></em>,
                    <em class="parameter"><code>const <a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gchar"><span class="type">gchar</span></a> version[8]</code></em>);</pre>
<p>Create a new key file.  A linked list of record blocks.</p>
<div class="refsect3">
<a name="camel-key-file-new.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>open flags</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>version</p></td>
<td class="parameter_description"><p>Version string (header) of file.  Currently
written but not checked.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="camel-key-file-new.returns"></a><h4>Returns</h4>
<p> A new key file, or NULL if the file could not
be opened/created/initialised.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="camel-key-file-rename"></a><h3>camel_key_file_rename ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_key_file_rename (<em class="parameter"><code><a class="link" href="CamelKeyFile.html" title="CamelKeyFile"><span class="type">CamelKeyFile</span></a> *kf</code></em>,
                       <em class="parameter"><code>const <a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *path</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="camel-key-file-delete"></a><h3>camel_key_file_delete ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_key_file_delete (<em class="parameter"><code><a class="link" href="CamelKeyFile.html" title="CamelKeyFile"><span class="type">CamelKeyFile</span></a> *kf</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="camel-key-file-write"></a><h3>camel_key_file_write ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_key_file_write (<em class="parameter"><code><a class="link" href="CamelKeyFile.html" title="CamelKeyFile"><span class="type">CamelKeyFile</span></a> *kf</code></em>,
                      <em class="parameter"><code><a class="link" href="CamelKeyFile.html#camel-block-t" title="camel_block_t"><span class="type">camel_block_t</span></a> *parent</code></em>,
                      <em class="parameter"><code><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gsize"><span class="type">gsize</span></a> len</code></em>,
                      <em class="parameter"><code><a class="link" href="CamelKeyFile.html#camel-key-t" title="camel_key_t"><span class="type">camel_key_t</span></a> *records</code></em>);</pre>
<p>Write a new list of records to the key file.</p>
<div class="refsect3">
<a name="camel-key-file-write.returns"></a><h4>Returns</h4>
<p> -1 on io error.  The key file will remain unchanged.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="camel-key-file-read"></a><h3>camel_key_file_read ()</h3>
<pre class="programlisting"><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gint"><span class="returnvalue">gint</span></a>
camel_key_file_read (<em class="parameter"><code><a class="link" href="CamelKeyFile.html" title="CamelKeyFile"><span class="type">CamelKeyFile</span></a> *kf</code></em>,
                     <em class="parameter"><code><a class="link" href="CamelKeyFile.html#camel-block-t" title="camel_block_t"><span class="type">camel_block_t</span></a> *start</code></em>,
                     <em class="parameter"><code><a href="/usr/share/gtk-doc/html/glibglib-Basic-Types.html#gsize"><span class="type">gsize</span></a> *len</code></em>,
                     <em class="parameter"><code><a class="link" href="CamelKeyFile.html#camel-key-t" title="camel_key_t"><span class="type">camel_key_t</span></a> **records</code></em>);</pre>
<p>Read the next block of data from the key file.  Returns the number of
records.</p>
<div class="refsect3">
<a name="camel-key-file-read.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>start</p></td>
<td class="parameter_description"><p>The record pointer.  This will be set to the next record pointer on success.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>Number of records read, if != NULL.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>records</p></td>
<td class="parameter_description"><p>Records, allocated, must be freed with g_free, if != NULL.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="camel-key-file-read.returns"></a><h4>Returns</h4>
<p> -1 on io error.</p>
</div>
</div>
</div>
<div class="refsect1">
<a name="CamelKeyFile.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="camel-block-t"></a><h3>camel_block_t</h3>
<pre class="programlisting">typedef guint32 camel_block_t; /* block offset, absolute, bottom BLOCK_SIZE_BITS always 0 */
</pre>
</div>
<hr>
<div class="refsect2">
<a name="camel-key-t"></a><h3>camel_key_t</h3>
<pre class="programlisting">typedef guint32 camel_key_t; /* this is a bitfield of (block offset:BLOCK_SIZE_BITS) */
</pre>
</div>
<hr>
<div class="refsect2">
<a name="CamelBlockFileFlags"></a><h3>enum CamelBlockFileFlags</h3>
<div class="refsect3">
<a name="CamelBlockFileFlags.members"></a><h4>Members</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody><tr>
<td class="enum_member_name"><p><a name="CAMEL-BLOCK-FILE-SYNC:CAPS"></a>CAMEL_BLOCK_FILE_SYNC</p></td>
<td> </td>
<td> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="CAMEL-BLOCK-SIZE:CAPS"></a><h3>CAMEL_BLOCK_SIZE</h3>
<pre class="programlisting">#define CAMEL_BLOCK_SIZE (1024)
</pre>
</div>
<hr>
<div class="refsect2">
<a name="CAMEL-BLOCK-SIZE-BITS:CAPS"></a><h3>CAMEL_BLOCK_SIZE_BITS</h3>
<pre class="programlisting">#define CAMEL_BLOCK_SIZE_BITS (10) /* # bits to contain block_size bytes */
</pre>
</div>
<hr>
<div class="refsect2">
<a name="CamelBlockFlags"></a><h3>enum CamelBlockFlags</h3>
<div class="refsect3">
<a name="CamelBlockFlags.members"></a><h4>Members</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="CAMEL-BLOCK-DIRTY:CAPS"></a>CAMEL_BLOCK_DIRTY</p></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="CAMEL-BLOCK-DETACHED:CAPS"></a>CAMEL_BLOCK_DETACHED</p></td>
<td> </td>
<td> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="CamelBlockRoot"></a><h3>struct CamelBlockRoot</h3>
<pre class="programlisting">struct CamelBlockRoot {
	gchar version[8]; /* version number */

	guint32 flags;		/* flags for file */
	guint32 block_size; /* block size of this file */
	camel_block_t free; /* free block list */
	camel_block_t last; /* pointer to end of blocks */

	/* subclasses tack on, but no more than CAMEL_BLOCK_SIZE! */
};
</pre>
</div>
<hr>
<div class="refsect2">
<a name="CamelBlock"></a><h3>struct CamelBlock</h3>
<pre class="programlisting">struct CamelBlock {
	camel_block_t id;
	CamelBlockFlags flags;
	guint32 refcount;
	guint32 align00;

	guchar data[CAMEL_BLOCK_SIZE];
};
</pre>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.25</div>
</body>
</html>